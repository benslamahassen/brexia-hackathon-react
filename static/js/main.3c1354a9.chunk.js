(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{226:function(e,t,a){e.exports=a(617)},231:function(e,t,a){},235:function(e,t,a){},538:function(e,t,a){},540:function(e,t,a){},544:function(e,t,a){},584:function(e,t,a){},591:function(e,t,a){},617:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(54),o=a.n(r),c=(a(231),a(55)),s=a(56),i=a(58),u=a(57),m=a(59),d=a(71),p=a(223),f=a.n(p),h=a(77),E=a.n(h),v=a(38),O=a.n(v),b=(a(235),a(48)),C=a(218),N=a(219),g=function(e,t,a){var n=t.name,l=t.color,r=void 0===l?"darkgrey":l,o=t.posX,c=void 0===o?50:o,s=t.posY,i=void 0===s?50:s,u=t.output,m=void 0!==u&&u,p=t.extras,f=void 0===p?{}:p,h=new d.DefaultNodeModel(n,r);h.setPosition(c,i),h.addInPort("Out"),h.extras=f,m&&h.addOutPort("In"),m&&h.addListener({selectionChanged:a}),e.addNode(h)},k=function(e){return 0===Object.keys(e).length?[]:Object.keys(e.getOutPorts()[0].links).map(function(t){return e.getOutPorts()[0].links[t].sourcePort.parent})},y=function(e){if(!e)return[];if("file"===e.extras.nodeType)return e.extras.columns;var t=e.extras.outColumn;return t||[]},w=function(e){var t=new N.Map;Object.keys(e.nodes).forEach(function(a){return t.set(a,e.nodes[a])});var a=new C.TopologicalSort(t);Object.keys(e.links).forEach(function(t){var n=e.links[t],l=n.sourcePort.parent.id,r=n.targetPort.parent.id;a.addEdge(l,r)});var n=a.sort(),l=Object(b.a)(n.entries()),r=[],o=!0,c=!1,s=void 0;try{for(var i,u=l[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var m=i.value[1].node.extras;m.transformation&&("Select"===m.transformation&&r.push({transformation:m.transformation,query:m.query}),"Combine"===m.transformation&&r.push({transformation:m.transformation,joinColumnTuples:m.tuples}))}}catch(d){c=!0,s=d}finally{try{o||null==u.return||u.return()}finally{if(c)throw s}}console.log({instructions:r})};var x=function(e){var t=e.model;return l.a.createElement("div",null,l.a.createElement(E.a,{className:"navbar",position:"static"},l.a.createElement(O.a,{color:"inherit",onClick:function(){return w(t)}},"Run"),l.a.createElement(O.a,{color:"inherit"},"Preview")))},j=a(78),S=a.n(j),T=a(224),I=a(113),M=a(117),D=a(225);a(538);var K=function(e){var t=e.model,a=e.files,n=e.addFile,r=e.refreshRenderKey,o=e.updateSeletction,c=function(e,t){return Math.floor(Math.random()*(e-t))+t},s=function(e,a){g(t,{name:e,color:a,posX:c(600,100),posY:c(600,100),output:!0,extras:{nodeType:"transformation",transType:e}},o),r(),console.log({model:t})};return l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"title"},"Transformations"),l.a.createElement("div",{className:"elements-column"},l.a.createElement("button",{onClick:function(){return s("Select","red")},className:"element"},"Select"),l.a.createElement("button",{onClick:function(){return s("Combine","green")},className:"element"},"Combine"),l.a.createElement("button",{onClick:function(){return s("GroupBy","orange")},className:"element"},"GroupBy"))),l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"title"},"Datasets"),l.a.createElement("div",{className:"elements-grid"},function(e){return e.map(function(e,a){var n="csv"===e.extension?"https://png.icons8.com/wired/50/000000/csv.png":"https://png.icons8.com/wired/50/000000/ms-excel.png";return l.a.createElement("button",{key:a,className:"element"},l.a.createElement("img",{onClick:function(a){return function(e,a){e.stopPropagation(),g(t,{name:a.name,color:"blue",posX:c(900,600),posY:c(600,100),output:!1,extras:{extension:a.extension,nodeType:"file",columns:a.columns}},o),r(),console.log({model:t})}(a,e)},className:"icon",src:n,alt:e.name}),l.a.createElement("div",{className:"element-title"},e.name))})}(a)),l.a.createElement("div",{className:"dropzone-container"},l.a.createElement(D.a,{onDrop:n,onFileDialogCancel:function(){return console.log("cancel")}},"Drag files here"))))};a(540);a(542);var P=function(e){var t=e.engine;return l.a.createElement("div",{className:"flowchart"},l.a.createElement(d.DiagramWidget,{diagramEngine:t}))},B=a(115),F=a.n(B),H=a(114),R=a.n(H),A=a(116),q=a.n(A),G=a(12),W=a.n(G),X=(a(544),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={searchKeyword:"",input:"",operations:[],checkedColumns:{}},a.filteredColumns=function(e,t){return e?t?e.filter(function(e){return e.includes(t)}):e:[]},a.addOperation=function(e){e.persist();var t="add"===e.target.innerText?a.state.input:e.target.innerText;a.setState(function(e){return{operations:Object(b.a)(e.operations).concat([t]),input:""}})},a.removeOperation=function(e,t){var n=a.state.operations;n.splice(t,1),a.setState({operations:n})},a.saveHandler=function(){var e=a.props,t=e.modalData,n=e.toggleModal,l=e.model,r=a.state,o=r.operations,c=r.checkedColumns,s=Object.keys(c).filter(function(e){return e.includes(t.id)}).map(function(e){return e.slice(e.indexOf("*")+1)}),i="SELECT ".concat(s.join(", ")," FROM ").concat(t.firstSourceName.split(".")[0]," ").concat(o.join(" "));l.nodes[t.id].extras={outColumn:s,transformation:"Select",query:i},n()},a.handleCheckbox=function(e,t){var n=a.state.checkedColumns;n[t+"*"+e.target.name]=e.target.checked,a.setState({checkedColumns:n})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.toggleModal,r=t.modalData,o=this.state,c=o.searchKeyword,s=o.operations,i=o.checkedColumns;return l.a.createElement("div",null,l.a.createElement(R.a,{className:"select-modal",fullScreen:!0,open:a},l.a.createElement(E.a,null,l.a.createElement(F.a,null,l.a.createElement(O.a,{color:"inherit",onClick:n,label:"Close"},"Close"),l.a.createElement(O.a,{color:"inherit",onClick:this.saveHandler},"save"))),l.a.createElement(q.a,{className:"select-diaglog"},l.a.createElement("div",{className:"select-modal-content"},l.a.createElement("div",{className:"columns"},l.a.createElement("input",{type:"text",className:"input-select",onChange:function(t){return t.persist()||e.setState({searchKeyword:t.target.value})}}),this.filteredColumns(r.columns,c).map(function(t,a){return l.a.createElement("span",{key:a},l.a.createElement("input",{checked:i[r.id+"*"+t],name:t,type:"checkbox",onChange:function(t){return e.handleCheckbox(t,r.id)}})," "+t)})),l.a.createElement("div",{className:"input"},l.a.createElement("div",null,l.a.createElement("div",{className:"row"},s.map(function(t,a){return l.a.createElement(W.a,{onClick:function(t){return e.removeOperation(t,a)},key:a,className:"column",label:t})})))),l.a.createElement("div",{className:"operations"},l.a.createElement("div",{className:"row"},l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"AND"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"OR"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"NOT"})),l.a.createElement("div",{className:"row"},l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"LIKE"}),l.a.createElement("span",{onClick:this.addOperation,className:"column"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"WHERE"})),l.a.createElement("div",{className:"row"},l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"="}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:">"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"<"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"<>"})),l.a.createElement("div",{className:"row"},l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:">="}),l.a.createElement("span",{className:"column"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"<="})),l.a.createElement("div",{className:"row"},l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"AVG"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"MIN"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"MAX"})),l.a.createElement("div",{className:"row"},l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"("}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"+"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"-"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"*"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:"/"}),l.a.createElement(W.a,{onClick:this.addOperation,className:"column",label:")"})),l.a.createElement("div",{className:"row"},l.a.createElement("input",{onChange:function(t){return t.persist()||e.setState({input:t.target.value})},type:"text",className:"column input-select"}),l.a.createElement(W.a,{onClick:this.addOperation,label:"add"})))))))}}]),t}(n.Component)),L=a(85),U=a(154),Y=a.n(U),J=a(156),z=a.n(J),V=a(87),$=a.n(V),Q=a(155),Z=a.n(Q),_=a(86),ee=a.n(_),te=(a(584),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={searchKeywordOne:"",searchKeywordTwo:"",inputOne:[],inputTwo:[]},a.filteredColumns=function(e,t){return e?t?e.filter(function(e){return e.includes(t)}):e:[]},a.removeInput=function(e,t){var n=a.state["input".concat(e)];n.splice(t,1),a.setState(Object(L.a)({},"input".concat(e),n))},a.saveHandler=function(){var e=a.props,t=e.modalData,n=e.toggleModal,l=e.model,r=a.state,o=r.inputOne,c=r.inputTwo,s=(o.length>=c.length?o:c).map(function(e,t){return[o[t],c[t]]}),i=Object(b.a)(new Set(t.columns.concat(t.secondColumns)));l.nodes[t.id].extras={outColumn:i,transformation:"Combine",tuples:s},n()},a.addInput=function(e,t){a.setState(function(a){return Object(L.a)({},"input".concat(e),Object(b.a)(a["input".concat(e)]).concat([t]))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.toggleModal,r=t.modalData,o=this.state,c=o.searchKeywordOne,s=o.searchKeywordTwo,i=o.inputOne,u=o.inputTwo;return l.a.createElement("div",null,l.a.createElement(R.a,{className:"select-modal",fullScreen:!0,open:a},l.a.createElement(E.a,null,l.a.createElement(F.a,null,l.a.createElement(O.a,{color:"inherit",onClick:n,label:"Close"},"Close"),l.a.createElement(O.a,{color:"inherit",onClick:this.saveHandler},"save"))),l.a.createElement(q.a,{className:"select-diaglog"},l.a.createElement("div",{className:"select-modal-content"},l.a.createElement("div",{className:"columns"},l.a.createElement("input",{type:"text",className:"input-select",onChange:function(t){return t.persist()||e.setState({searchKeywordOne:t.target.value})}}),this.filteredColumns(r.columns,c).map(function(t,a){return l.a.createElement("div",{key:a,onClick:function(a){return e.addInput("One",t)}},t)})),l.a.createElement("div",{className:"input"},l.a.createElement(Y.a,null,l.a.createElement(Z.a,null,l.a.createElement(ee.a,null,l.a.createElement($.a,null,"INPUT 1"))),l.a.createElement(z.a,null,i.map(function(t,a){return l.a.createElement(ee.a,{key:a,onClick:function(){return e.removeInput("One",a)}},l.a.createElement($.a,null,t))}))),l.a.createElement(Y.a,null,l.a.createElement(Z.a,null,l.a.createElement(ee.a,null,l.a.createElement($.a,null,"INPUT 2"))),l.a.createElement(z.a,null,u.map(function(t,a){return l.a.createElement(ee.a,{key:a,onClick:function(){return e.removeInput("Two",a)}},l.a.createElement($.a,null,t))})))),l.a.createElement("div",{className:"columns"},l.a.createElement("input",{type:"text",className:"input-select",onChange:function(t){return t.persist()||e.setState({searchKeywordTwo:t.target.value})}}),this.filteredColumns(r.secondColumns,s).map(function(t,a){return l.a.createElement("div",{key:a,onClick:function(a){return e.addInput("Two",t)}},t)}))))))}}]),t}(n.Component)),ae=(a(591),a(222)),ne=a.n(ae),le=function(){var e=Object(I.a)(S.a.mark(function e(t,a){var n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.get("http://192.168.62.78:9000/cols/"+t+"/"+a);case 3:return n=e.sent,console.log({response:n.data}),e.abrupt("return",n.data.cols);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={nodeIsSelected:!1,files:[{name:"testFile.csv",extension:"csv",columns:["Csqdd","Caaaaa","Cccccc","Cttttt","Copoo","Coppppp","Cdsd"]},{name:"TestFile.xlsx",extension:"xlsx",columns:["Testsqdd","Testaaaaa","TestCccccc","Testttttt","Testopoo","Testoppppp","Testdsd"]}],selectModalIsOpen:!1,combineModalIsOpen:!1,groupByModalIsOpen:!1,modalData:{},instructions:[]},a.updateSeletction=function(e){return a.setState({nodeIsSelected:e.isSelected&&["Select","Combine","GroupBy"].includes(e.entity.name)?e.entity:null})},a.refreshRenderKey=function(){return a.forceUpdate()},a.editNodeHandler=function(){var e=a.state.nodeIsSelected,t=k(e)[0],n=t?"file"===t.extras.nodeType?t.name:t.id:{},l=y(t);switch(e.name){case"Select":a.setState(function(t){return{selectModalIsOpen:!t.selectModalIsOpen,modalData:Object(M.a)({},e,{columns:l,firstSourceName:n})}});break;case"Combine":var r=k(e)[1],o=r?"file"===r.extras.nodeType?r.name:r.id:{},c=y(r);a.setState(function(t){return{combineModalIsOpen:!t.combineModalIsOpen,modalData:Object(M.a)({},e,{columns:l,secondColumns:c,firstSourceName:n,secondSourceName:o})}});break;case"GroupBy":a.setState(function(t){return{groupByModalIsOpen:!t.groupByModalIsOpen,modalData:Object(M.a)({},e,{columns:l,firstSourceName:n})}})}},a.addFile=function(){var e=Object(I.a)(S.a.mark(function e(t){var n,l,r,o,c;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(T.a)(t,1),"text/csv"===(l=n[0]).type||!l.type.split(".")[1]||l.type.split(".")[1].includes("xls")){e.next=3;break}return e.abrupt("return");case 3:return r="text/csv"===l.type?"csv":"xlsx",e.next=6,le(l.name.split(".")[0],r);case 6:o=e.sent,console.log({columns:o}),c={name:l.name,extension:r,columns:o},a.setState(function(e){return{files:Object(b.a)(e.files).concat([c])}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.nodeIsSelected,a=e.files,n=e.renderKey,r=e.selectModalIsOpen,o=e.combineModalIsOpen,c=e.modalData,s=this.props,i=s.model,u=s.engine,m={model:i,addFile:this.addFile,files:a,refreshRenderKey:this.refreshRenderKey,updateSeletction:this.updateSeletction},d={isOpen:r,toggleModal:this.editNodeHandler,modalData:c,model:i},p={isOpen:o,toggleModal:this.editNodeHandler,modalData:c,model:i};return l.a.createElement("div",{className:"editor"},l.a.createElement(P,{key:n,engine:u}),l.a.createElement(K,m),t&&l.a.createElement(O.a,{onClick:this.editNodeHandler,className:"edit-element"},"Edit element"),l.a.createElement(X,d),l.a.createElement(te,p))}}]),t}(n.Component),oe=new d.DiagramEngine;oe.installDefaultFactories();var ce=new d.DiagramModel;oe.setDiagramModel(ce);var se=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(f.a,null,l.a.createElement(x,{model:ce}),l.a.createElement(re,{model:ce,engine:oe})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[226,2,1]]]);
//# sourceMappingURL=main.3c1354a9.chunk.js.map